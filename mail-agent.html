<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mailo â€” AI Email Assistant</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg:      #111114;
    --surface: #19191F;
    --panel:   #1E1E26;
    --border:  #2C2C38;
    --border2: #383848;
    --moss:    #4EB87A;
    --moss-l:  #5FCC8E;
    --moss-d:  #163024;
    --ink:     #EEECEA;
    --ink-s:   #A8A5A0;
    --ink-m:   #5E5C58;
    --blush:   #E8886A;
    --sky:     #6FA3C8;
    --sky-d:   #14222E;
    --r:       12px;
  }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--ink);
    height: 100vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* â”€â”€ TOP BAR â”€â”€ */
  .topbar {
    display:flex; align-items:center; justify-content:space-between;
    padding:0 20px; height:50px;
    background:var(--surface); border-bottom:1px solid var(--border);
    flex-shrink:0;
  }

  .logo { display:flex; align-items:center; gap:8px; }
  .logo-mark {
    width:28px; height:28px; background:var(--moss);
    border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:13px;
  }
  .logo-name { font-family:'Lora',serif; font-size:19px; font-weight:500; letter-spacing:-0.3px; }
  .logo-name span { color:var(--moss); }

  .topbar-pills {
    display:flex; gap:3px; background:var(--bg); border-radius:30px; padding:3px;
  }
  .pill {
    padding:5px 16px; border-radius:24px; font-size:12px; font-weight:500;
    cursor:pointer; border:none; background:transparent; color:var(--ink-s); transition:all .16s;
  }
  .pill.active { background:var(--panel); color:var(--ink); box-shadow:0 2px 8px rgba(0,0,0,.3); }

  .topbar-right { display:flex; align-items:center; gap:10px; }

  .send-all-btn {
    display:flex; align-items:center; gap:5px;
    padding:7px 15px; border-radius:20px; border:none;
    background:var(--blush); color:white;
    font-family:'DM Sans',sans-serif; font-size:12px; font-weight:600;
    cursor:pointer; transition:all .18s;
  }
  .send-all-btn:hover { background:#D97655; transform:translateY(-1px); box-shadow:0 4px 14px rgba(232,136,106,.35); }

  .avatar {
    width:28px; height:28px; border-radius:50%;
    background:linear-gradient(135deg, var(--moss), var(--sky));
    display:flex; align-items:center; justify-content:center;
    color:white; font-size:10px; font-weight:700; cursor:pointer;
  }

  /* â”€â”€ MAIN â”€â”€ */
  .main { flex:1; display:flex; overflow:hidden; }

  /* â”€â”€ SIDEBAR â”€â”€ */
  .sidebar {
    width:54px; background:var(--surface); border-right:1px solid var(--border);
    display:flex; flex-direction:column; align-items:center;
    padding:12px 0; gap:3px; flex-shrink:0;
  }
  .sicon {
    width:36px; height:36px; border-radius:10px;
    display:flex; align-items:center; justify-content:center;
    cursor:pointer; font-size:15px; transition:all .15s;
  }
  .sicon:hover { background:var(--border); color:var(--ink); }
  .sicon.active { background:var(--moss-d); color:var(--moss); }
  .sidebar-spacer { flex:1; }

  /* â”€â”€ THREE PANELS â”€â”€ */
  .panels {
    flex:1; display:grid;
    grid-template-columns: 1fr 1fr 300px;
    overflow:hidden;
  }

  .panel {
    display:flex; flex-direction:column; overflow:hidden;
    padding:18px 16px 14px; gap:12px;
  }

  .p1 { background:var(--bg); border-right:1px solid var(--border); }
  .p2 { background:var(--panel); border-right:1px solid var(--border); }
  .p3 { background:var(--bg); }

  /* â”€â”€ PANEL HEADER â”€â”€ */
  .ph { display:flex; align-items:center; gap:8px; flex-shrink:0; }
  .step {
    width:20px; height:20px; border-radius:6px;
    display:flex; align-items:center; justify-content:center;
    font-size:10px; font-weight:700; flex-shrink:0;
  }
  .p1 .step { background:var(--moss-d); color:var(--moss); }
  .p2 .step { background:rgba(232,136,106,.15); color:var(--blush); }
  .p3 .step { background:var(--sky-d); color:var(--sky); }

  .ptitle { font-family:'Lora',serif; font-size:14px; font-weight:500; }
  .psub { margin-left:auto; font-size:11px; color:var(--ink-m); }

  /* â”€â”€ CHAT â”€â”€ */
  .chat-area {
    flex:1; overflow-y:auto;
    display:flex; flex-direction:column; gap:10px;
    padding-right:2px; min-height:0;
  }
  .chat-area::-webkit-scrollbar { width:3px; }
  .chat-area::-webkit-scrollbar-thumb { background:var(--border2); border-radius:2px; }

  .bubble {
    max-width:90%; padding:10px 13px; border-radius:var(--r);
    font-size:13px; line-height:1.55; animation:fu .2s ease;
  }
  @keyframes fu { from{opacity:0;transform:translateY(5px)} to{opacity:1;transform:translateY(0)} }

  .ba { background:var(--surface); border:1px solid var(--border); align-self:flex-start; border-bottom-left-radius:3px; }
  .ai-tag { display:block; font-size:10px; font-weight:700; letter-spacing:.6px; color:var(--moss); margin-bottom:4px; }
  .bu { background:var(--moss-d); border:1px solid #1E4A30; color:var(--ink); align-self:flex-end; border-bottom-right-radius:3px; }

  .rcards { display:flex; flex-direction:column; gap:5px; margin-top:6px; }
  .rcard {
    background:var(--panel); border:1px solid var(--border); border-radius:9px;
    padding:8px 10px; cursor:pointer; transition:all .14s;
    display:flex; align-items:center; gap:8px;
  }
  .rcard:hover { border-color:var(--moss); transform:translateX(2px); }
  .rcard.sel { border-color:var(--moss); background:var(--moss-d); }
  .rcard-ico {
    width:24px; height:24px; border-radius:6px;
    background:var(--border); display:flex; align-items:center; justify-content:center;
    font-size:12px; flex-shrink:0;
  }
  .rcard-body { flex:1; min-width:0; }
  .rcard-t { font-size:12px; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .rcard-s { font-size:11px; color:var(--ink-m); margin-top:1px; }
  .rcard-chk {
    width:15px; height:15px; border-radius:50%; border:1.5px solid var(--border2);
    display:flex; align-items:center; justify-content:center;
    font-size:8px; color:transparent; transition:all .14s; flex-shrink:0;
  }
  .rcard.sel .rcard-chk { background:var(--moss); border-color:var(--moss); color:white; }

  .thinking {
    display:flex; gap:4px; padding:10px 13px;
    background:var(--surface); border:1px solid var(--border); border-radius:var(--r);
    border-bottom-left-radius:3px; align-self:flex-start; align-items:center;
  }
  .tdot { width:5px; height:5px; background:var(--moss); border-radius:50%; animation:bounce 1.1s infinite; }
  .tdot:nth-child(2){animation-delay:.18s} .tdot:nth-child(3){animation-delay:.36s}
  @keyframes bounce{0%,100%{transform:translateY(0);opacity:.3}50%{transform:translateY(-4px);opacity:1}}

  .cinput-row { display:flex; gap:6px; align-items:flex-end; flex-shrink:0; }
  .cinput {
    flex:1; background:var(--surface); border:1px solid var(--border); border-radius:10px;
    padding:9px 13px; font-family:'DM Sans',sans-serif; font-size:13px; color:var(--ink);
    resize:none; outline:none; transition:border-color .16s; line-height:1.5;
    min-height:40px; max-height:100px;
  }
  .cinput:focus { border-color:var(--moss); }
  .cinput::placeholder { color:var(--ink-m); }
  .csend {
    width:36px; height:36px; border-radius:9px; border:none;
    background:var(--moss); color:white; font-size:15px; cursor:pointer;
    display:flex; align-items:center; justify-content:center; transition:all .16s; flex-shrink:0;
  }
  .csend:hover { background:var(--moss-l); transform:scale(1.05); }

  /* â”€â”€ EMAIL PANEL â€” modern compose â”€â”€ */
  .ctx-pill {
    display:inline-flex; align-items:center; gap:6px;
    background:var(--moss-d); border:1px solid #1E4A30;
    border-radius:20px; padding:4px 10px 4px 8px;
    font-size:11px; color:var(--moss); font-weight:500; flex-shrink:0; align-self:flex-start;
  }
  .ctx-pill .rm { cursor:pointer; opacity:.5; margin-left:3px; font-size:11px; }
  .ctx-pill .rm:hover { opacity:1; }

  /* SENDER SELECTOR */
  .sender-row {
    display:flex; align-items:center; gap:8px;
    padding:10px 14px; border-bottom:1px solid var(--border); flex-shrink:0;
  }
  .sender-label {
    font-size:10px; font-weight:700; letter-spacing:.7px;
    color:var(--ink-m); text-transform:uppercase; flex-shrink:0;
  }
  .sender-accounts {
    display:flex; gap:5px; flex:1; overflow-x:auto;
  }
  .sender-accounts::-webkit-scrollbar { display:none; }
  .sender-opt {
    display:flex; align-items:center; gap:6px;
    padding:5px 10px; border-radius:20px; border:1px solid var(--border);
    background:transparent; cursor:pointer; transition:all .15s; flex-shrink:0;
    font-family:'DM Sans',sans-serif;
  }
  .sender-opt:hover { border-color:var(--border2); background:var(--border); }
  .sender-opt.active { border-color:var(--moss); background:var(--moss-d); }
  .sender-dot {
    width:7px; height:7px; border-radius:50%; flex-shrink:0;
  }
  .sender-name { font-size:11px; font-weight:500; color:var(--ink-s); }
  .sender-opt.active .sender-name { color:var(--moss); }
  .sender-email { font-size:10px; color:var(--ink-m); }
  .sender-opt.active .sender-email { color:var(--moss); opacity:.7; }

  .compose-wrap {
    flex:1; display:flex; flex-direction:column; min-height:0;
    background:var(--surface); border-radius:14px; border:1px solid var(--border);
    overflow:hidden;
  }

  /* subject row */
  .csubject-row {
    display:flex; align-items:center;
    border-bottom:1px solid var(--border); flex-shrink:0; gap:8px; padding-right:10px;
  }
  .csubject-input {
    flex:1; background:transparent; border:none; outline:none;
    padding:13px 16px; font-family:'DM Sans',sans-serif;
    font-size:14px; font-weight:600; color:var(--ink); letter-spacing:-0.2px;
  }
  .csubject-input::placeholder { color:var(--ink-m); font-weight:400; }

  .ai-generate-btn {
    width:28px; height:28px; border-radius:8px; border:none;
    background:var(--border); color:var(--ink-s);
    display:flex; align-items:center; justify-content:center;
    cursor:pointer; transition:all .16s; flex-shrink:0; font-size:14px;
  }
  .ai-generate-btn:hover { background:var(--moss-d); color:var(--moss); transform:scale(1.08); }

  /* body area */
  .cbody-area {
    flex:1; display:flex; flex-direction:column; min-height:0; position:relative;
  }

  .cbody {
    flex:1; background:transparent; border:none; outline:none; resize:none;
    padding:14px 16px; font-family:'DM Sans',sans-serif;
    font-size:13px; line-height:1.8; color:var(--ink);
    min-height:0;
  }
  .cbody::placeholder { color:var(--ink-m); }



  /* bottom bar */
  .compose-bar {
    display:flex; align-items:center; gap:4px;
    padding:8px 10px; border-top:1px solid var(--border); flex-shrink:0;
  }

  .cbar-btn {
    display:flex; align-items:center; gap:3px;
    padding:5px 9px; border-radius:7px; border:none;
    background:transparent; font-family:'DM Sans',sans-serif;
    font-size:11px; color:var(--ink-m); cursor:pointer; transition:all .13s; white-space:nowrap;
  }
  .cbar-btn:hover { background:var(--border); color:var(--ink); }
  .cbar-sep { width:1px; height:14px; background:var(--border); flex-shrink:0; margin:0 3px; }

  .cbar-save {
    margin-left:auto; padding:5px 13px; border-radius:7px;
    border:1px solid var(--border2); background:transparent;
    font-family:'DM Sans',sans-serif; font-size:11px; font-weight:500;
    color:var(--ink-s); cursor:pointer; transition:all .15s;
  }
  .cbar-save:hover { background:var(--border); color:var(--ink); }

  /* â”€â”€ RECIPIENTS PANEL â”€â”€ */
  .rsearch-row { display:flex; gap:6px; flex-shrink:0; }
  .rsearch {
    flex:1; background:var(--surface); border:1px solid var(--border); border-radius:var(--r);
    padding:8px 12px; font-family:'DM Sans',sans-serif; font-size:12px; color:var(--ink);
    outline:none; transition:border-color .16s;
  }
  .rsearch:focus { border-color:var(--sky); }
  .rsearch::placeholder { color:var(--ink-m); }
  .add-btn {
    padding:7px 12px; border-radius:var(--r); border:none; background:var(--sky-d); color:var(--sky);
    font-family:'DM Sans',sans-serif; font-size:11px; font-weight:600; cursor:pointer; transition:all .16s; white-space:nowrap;
    border:1px solid #1E3A50;
  }
  .add-btn:hover { background:var(--sky); color:white; border-color:var(--sky); }

  .sec-label { font-size:10px; font-weight:700; letter-spacing:.9px; color:var(--ink-m); text-transform:uppercase; flex-shrink:0; }

  .chips-area { display:flex; flex-wrap:wrap; gap:5px; min-height:24px; flex-shrink:0; }
  .chip {
    display:flex; align-items:center; gap:5px; padding:3px 8px 3px 5px;
    border-radius:20px; background:var(--sky-d); border:1px solid #1E3A50;
    font-size:11px; color:var(--sky); font-weight:500; animation:fu .18s ease;
  }
  .chip-av { width:15px; height:15px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:7px; font-weight:700; color:white; }
  .chip-rm { cursor:pointer; opacity:.45; font-size:11px; margin-left:1px; }
  .chip-rm:hover { opacity:1; }
  .no-r { font-size:11px; color:var(--ink-m); font-style:italic; }

  .contacts-list { display:flex; flex-direction:column; gap:4px; overflow-y:auto; flex:1; min-height:0; }
  .contacts-list::-webkit-scrollbar{width:3px}
  .contacts-list::-webkit-scrollbar-thumb{background:var(--border2);border-radius:2px}

  .crow {
    display:flex; align-items:center; gap:8px; padding:8px 10px;
    border-radius:9px; border:1px solid transparent; background:var(--surface);
    cursor:pointer; transition:all .14s; flex-shrink:0;
  }
  .crow:hover { border-color:var(--sky); background:var(--panel); }
  .crow.added { border-color:#1E3A50; background:var(--sky-d); }

  .cav { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:10px; font-weight:700; color:white; flex-shrink:0; }
  .cinfo { flex:1; min-width:0; }
  .cname { font-size:12px; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .cemail { font-size:10px; color:var(--ink-m); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .ctag { font-size:9px; font-weight:700; padding:2px 6px; border-radius:20px; flex-shrink:0; white-space:nowrap; letter-spacing:.3px; }
  .ctag-add { background:var(--border); color:var(--ink-m); }
  .ctag-added { background:var(--sky-d); color:var(--sky); border:1px solid #1E3A50; }

  .send-summary {
    background:linear-gradient(135deg, var(--sky-d), var(--moss-d));
    border:1px solid #1E3A50; border-radius:var(--r);
    padding:12px; display:flex; align-items:center; gap:10px; flex-shrink:0;
  }
  .ss-ico { font-size:18px; }
  .ss-text { flex:1; }
  .ss-title { font-size:12px; font-weight:600; }
  .ss-sub { font-size:10px; color:var(--ink-m); margin-top:2px; }
  .send-now {
    padding:7px 14px; border-radius:20px; border:none; background:var(--blush); color:white;
    font-family:'DM Sans',sans-serif; font-size:11px; font-weight:700; cursor:pointer; transition:all .16s; white-space:nowrap;
  }
  .send-now:hover { background:#D97655; transform:translateY(-1px); box-shadow:0 4px 12px rgba(232,136,106,.35); }

  .divider { height:1px; background:var(--border); flex-shrink:0; }

  /* â”€â”€ STATUS BAR â”€â”€ */
  .statusbar {
    height:24px; background:var(--surface); border-top:1px solid var(--border);
    display:flex; align-items:center; justify-content:space-between;
    padding:0 20px; flex-shrink:0;
  }
  .sl { display:flex; align-items:center; gap:5px; font-size:10px; color:var(--ink-m); }
  .dot { width:5px; height:5px; border-radius:50%; background:var(--moss); animation:pulse 2s infinite; }
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:.25}}
  .sc { font-size:10px; color:var(--ink-m); font-style:italic; font-family:'Lora',serif; }

  /* â”€â”€ TOAST â”€â”€ */
  .toast {
    position:fixed; bottom:38px; left:50%; transform:translateX(-50%) translateY(10px);
    background:#0A0A0D; color:var(--ink); border:1px solid var(--border2);
    padding:8px 18px; border-radius:30px; font-size:12px;
    opacity:0; transition:all .24s; z-index:100; pointer-events:none; white-space:nowrap;
  }
  .toast.show { opacity:1; transform:translateX(-50%) translateY(0); }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="logo">
    <div class="logo-mark">
      <svg width="15" height="12" viewBox="0 0 15 12" fill="none" stroke="white" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="1" y="1" width="13" height="10" rx="1.5"/>
        <path d="M1 3l6.5 4.5L14 3"/>
      </svg>
    </div>
    <div class="logo-name">mai<span>lo</span></div>
  </div>
  <div class="topbar-pills">
    <button class="pill active">Compose</button>
    <button class="pill">Inbox</button>
    <button class="pill">Sent</button>
  </div>
  <div class="topbar-right">
    <button class="send-all-btn" onclick="sendAll()">ëª¨ë‘ì—ê²Œ ë³´ë‚´ê¸° â†—</button>
    <div class="avatar">JS</div>
  </div>
</div>

<!-- MAIN -->
<div class="main">
  <div class="sidebar">
    <div class="sicon active" title="Compose">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <path d="M11.5 2.5l2 2L6 12H4v-2l7.5-7.5z"/>
        <path d="M2 14h12" opacity=".3"/>
      </svg>
    </div>
    <div class="sicon" title="Templates">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="2" y="2" width="12" height="12" rx="2"/>
        <path d="M5 5.5h6M5 8h6M5 10.5h4"/>
      </svg>
    </div>
    <div class="sicon" title="Contacts">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="5.5" r="2.5"/>
        <path d="M2.5 13.5c0-3 2.5-4.5 5.5-4.5s5.5 1.5 5.5 4.5"/>
      </svg>
    </div>
    <div class="sicon" title="History">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="8" r="5.5"/>
        <path d="M8 5v3.5l2 1.5"/>
      </svg>
    </div>
    <div class="sidebar-spacer"></div>
    <div class="sicon" title="Settings">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="8" cy="8" r="2"/>
        <path d="M8 1.5v1.3M8 13.2v1.3M1.5 8h1.3M13.2 8h1.3M3.4 3.4l.9.9M11.7 11.7l.9.9M3.4 12.6l.9-.9M11.7 4.3l.9-.9"/>
      </svg>
    </div>
  </div>

  <div class="panels">

    <!-- â‘  RESEARCH -->
    <div class="panel p1">
      <div class="ph">
        <div class="step">1</div>
        <div class="ptitle">Research</div>
        <div class="psub">AI Search</div>
      </div>

      <div class="chat-area" id="chatArea">
        <div class="bubble ba">
          <span class="ai-tag">MAILO AI</span>
          ì•ˆë…•í•˜ì„¸ìš”! ì´ë©”ì¼ì— í•„ìš”í•œ ì •ë³´ë¥¼ ì°¾ì•„ë“œë¦´ê²Œìš”. ë¬´ì—‡ì´ë“  ê²€ìƒ‰í•´ ë³´ì„¸ìš” ğŸŒ¿
        </div>
      </div>

      <div class="cinput-row">
        <textarea class="cinput" id="chatInput"
          placeholder="íšŒì‚¬ ì •ë³´, ì—°ë½ì²˜, ë‰´ìŠ¤ ë“± ê²€ìƒ‰â€¦"
          rows="1" onkeydown="handleKey(event)" oninput="autoResize(this)"></textarea>
        <button class="csend" onclick="sendMessage()">â†‘</button>
      </div>
    </div>

    <!-- â‘¡ EMAIL DRAFT â€” modern compose -->
    <div class="panel p2">
      <div class="ph">
        <div class="step">2</div>
        <div class="ptitle">Email Draft</div>
        <div class="psub" id="draftStatus">â€”</div>
      </div>

      <!-- context pill (hidden by default) -->
      <div class="ctx-pill" id="ctxBadge" style="display:none;">
        <span>ğŸ“</span>
        <span id="ctxText">ì»¨í…ìŠ¤íŠ¸</span>
        <span class="rm" onclick="removeCtx()">âœ•</span>
      </div>

      <!-- compose card -->
      <div class="compose-wrap">

        <!-- sender selector -->
        <div class="sender-row">
          <div class="sender-label">From</div>
          <div class="sender-accounts">
            <button class="sender-opt active" onclick="selectSender(this)">
              <div class="sender-dot" style="background:#4EB87A"></div>
              <div>
                <div class="sender-name">ê°œì¸</div>
                <div class="sender-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="81ebe0ece4f2c1e6ece0e8edafe2eeec">[email&#160;protected]</a></div>
              </div>
            </button>
            <button class="sender-opt" onclick="selectSender(this)">
              <div class="sender-dot" style="background:#6FA3C8"></div>
              <div>
                <div class="sender-name">íšŒì‚¬</div>
                <div class="sender-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fc969d91998fbc9f93918c9d9285d29593">[email&#160;protected]</a></div>
              </div>
            </button>
            <button class="sender-opt" onclick="selectSender(this)">
              <div class="sender-dot" style="background:#E8886A"></div>
              <div>
                <div class="sender-name">í•™êµ</div>
                <div class="sender-email"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="86ece7ebe3f5c6f3e8eff0a8e7e5a8edf4">[email&#160;protected]</a></div>
              </div>
            </button>
          </div>
        </div>

        <!-- subject -->
        <div class="csubject-row">
          <input class="csubject-input" id="subjectField" type="text" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”â€¦">
          <button class="ai-generate-btn" title="AI ì´ˆì•ˆ ìƒì„±" onclick="generateEmail()">âœ¦</button>
        </div>

        <!-- body -->
        <div class="cbody-area">
          <textarea class="cbody" id="bodyField"
            placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ê±°ë‚˜ AI ì´ˆì•ˆì„ ìƒì„±í•´ ë³´ì„¸ìš”â€¦"
           ></textarea>

        </div>

        <!-- bottom toolbar -->
        <div class="compose-bar">
          <button class="cbar-btn" onclick="rewriteEmail()">âœ¨ ì¬ì‘ì„±</button>
          <div class="cbar-sep"></div>
          <button class="cbar-btn" onclick="shortenEmail()">âœ‚ï¸ ìš”ì•½</button>
          <button class="cbar-btn" onclick="formalEmail()">ğŸ‘” ê³µì‹ì²´</button>
          <button class="cbar-btn" onclick="casualEmail()">â˜€ï¸ ì¹œê·¼ì²´</button>
          <button class="cbar-save" onclick="saveDraft()">ì„ì‹œì €ì¥</button>
        </div>
      </div>
    </div>

    <!-- â‘¢ RECIPIENTS -->
    <div class="panel p3">
      <div class="ph">
        <div class="step">3</div>
        <div class="ptitle">Recipients</div>
        <div class="psub" id="rcptCount">0ëª…</div>
      </div>

      <div style="display:flex;flex-direction:column;gap:6px;flex-shrink:0;">
        <div class="sec-label">ì„ íƒëœ ìˆ˜ì‹ ì</div>
        <div class="chips-area" id="chipsArea">
          <span class="no-r">ì•„ì§ ì—†ì–´ìš”</span>
        </div>
      </div>

      <div class="divider"></div>

      <div class="rsearch-row">
        <input class="rsearch" id="rSearch" type="text"
          placeholder="ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼â€¦" oninput="filterContacts(this.value)">
        <button class="add-btn" onclick="addManual()">+ ì¶”ê°€</button>
      </div>

      <div class="sec-label">ì¶”ì²œ ì—°ë½ì²˜</div>

      <div class="contacts-list" id="contactsList"></div>

      <div class="send-summary" id="sendSummary" style="display:none;">
        <div class="ss-ico">ğŸ“¨</div>
        <div class="ss-text">
          <div class="ss-title" id="ssTitle">ì¤€ë¹„ ì™„ë£Œ</div>
          <div class="ss-sub" id="ssSub">ìˆ˜ì‹ ìì™€ ì´ˆì•ˆ ì„¤ì •ë¨</div>
        </div>
        <button class="send-now" onclick="sendAll()">ë³´ë‚´ê¸° â†—</button>
      </div>
    </div>

  </div>
</div>

<!-- STATUS BAR -->
<div class="statusbar">
  <div class="sl"><div class="dot"></div>AI Connected</div>
  <div class="sc" id="statusCenter">ì´ë©”ì¼ ì‘ì„±ì„ ì‹œì‘í•˜ì„¸ìš”</div>
  <div class="sl">Feb 18, 2026</div>
</div>

<div class="toast" id="toast"></div>

<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
  const CONTACTS = [
    { name:'Sarah Lee',    email:'sarah.lee@acme.com',  color:'#3D8A60' },
    { name:'James Kim',    email:'j.kim@venture.io',    color:'#5A8FB5' },
    { name:'Mia Tanaka',   email:'mia@designstudio.co', color:'#C87060' },
    { name:'David Park',   email:'d.park@techcorp.com', color:'#7060C8' },
    { name:'Lena Fischer', email:'lena@growthlab.eu',   color:'#B07040' },
    { name:'Tom Nakamura', email:'tom.n@startup.ai',    color:'#40A870' },
    { name:'Aisha Rahman', email:'aisha@globalco.org',  color:'#B04060' },
  ];

  const AI_RESP = [
    { text:'ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. ì´ˆì•ˆì— í™œìš©í•  í•­ëª©ì„ ì„ íƒí•´ ì£¼ì„¸ìš”:', cards:[
      { icon:'ğŸ¢', title:'Acme Inc. íšŒì‚¬ ê°œìš”', sub:'ì°½ë¦½ 2015 Â· ì§ì› 340ëª… Â· SaaS' },
      { icon:'ğŸ“°', title:'ìµœê·¼ ë‰´ìŠ¤', sub:'4,000ë§Œ ë‹¬ëŸ¬ ì‹œë¦¬ì¦ˆ B í€ë”© ì™„ë£Œ' },
      { icon:'ğŸ‘¤', title:'Sarah Lee ì—°ë½ì²˜', sub:'íŒŒíŠ¸ë„ˆì‹­ ì´ê´„ Â· acme.com' },
    ]},
    { text:'ê²€ìƒ‰ ê²°ê³¼ì…ë‹ˆë‹¤. ì´ë©”ì¼ì— ì‚¬ìš©í•  í•­ëª©ì„ ê³ ë¥´ì„¸ìš”:', cards:[
      { icon:'ğŸ“Š', title:'2025 ì‹œì¥ ë¦¬í¬íŠ¸', sub:'í•´ë‹¹ ì„¹í„° YoY ì„±ì¥ë¥  23%' },
      { icon:'ğŸ¤', title:'í˜‘ì—… ê¸°íšŒ ë¶„ì„', sub:'ì „ëµì  ì í•©ë„ ë†’ìŒ Â· ê³µí†µ í´ë¼ì´ì–¸íŠ¸ 3ê°œ' },
    ]},
    { text:'ê´€ë ¨ ìë£Œë¥¼ ì°¾ì•˜ì–´ìš”. ì„ íƒí•˜ë©´ ì´ˆì•ˆì— ë°˜ì˜ë©ë‹ˆë‹¤:', cards:[
      { icon:'ğŸ“', title:'ë¯¸íŒ… ë©”ëª¨', sub:'ë§ˆì§€ë§‰ ë¯¸íŒ…: 12ì›” 12ì¼ Â· íŒ”ë¡œì—… í•„ìš”' },
      { icon:'ğŸ“§', title:'ì´ì „ ì´ë©”ì¼ ìŠ¤ë ˆë“œ', sub:'4ê°œ ë©”ì‹œì§€ Â· 2ì£¼ ì „ ë§ˆì§€ë§‰ ë‹µì¥' },
    ]},
  ];

  const DRAFTS = [
`ì•ˆë…•í•˜ì„¸ìš” Sarah,

ìµœê·¼ Acme Inc.ì˜ ì‹œë¦¬ì¦ˆ B í€ë”© ì†Œì‹ì„ ì ‘í–ˆìŠµë‹ˆë‹¤. 4,000ë§Œ ë‹¬ëŸ¬ ê·œëª¨ì˜ íˆ¬ì, ì§„ì‹¬ìœ¼ë¡œ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!

ì €ëŠ” [íšŒì‚¬ëª…]ì—ì„œ íŒŒíŠ¸ë„ˆì‹­ì„ ë‹´ë‹¹í•˜ëŠ” [ì´ë¦„]ì…ë‹ˆë‹¤. ê³µí†µ í´ë¼ì´ì–¸íŠ¸ 3ê³³ê³¼ì˜ ì‹œë„ˆì§€ ê°€ëŠ¥ì„±ì„ íƒìƒ‰í•´ë³´ê³  ì‹¶ì–´ ì—°ë½ë“œë ¸ìŠµë‹ˆë‹¤.

ì´ë²ˆ ì£¼ 20ë¶„ ì •ë„ ì§§ì€ í†µí™”ê°€ ê°€ëŠ¥í• ê¹Œìš”?

ê°ì‚¬í•©ë‹ˆë‹¤,
James`,
`ì•ˆë…•í•˜ì„¸ìš”,

2025 ì‹œì¥ ë¦¬í¬íŠ¸ë¥¼ ê²€í† í•˜ë‹¤ê°€ ê·€ì‚¬ì˜ ì¸ìƒì ì¸ ì„±ì¥ì„¸(YoY 23%)ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

ì–‘ì¸¡ ëª¨ë‘ì—ê²Œ ê°€ì¹˜ ìˆëŠ” í˜‘ì—… ë°©ì•ˆì„ ì œì•ˆë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤. ê°„ë‹¨í•œ ë¯¸íŒ…ì„ í†µí•´ ì•„ì´ë””ì–´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆì„ê¹Œìš”?

ê°ì‚¬í•©ë‹ˆë‹¤.`
  ];

  let resCtx = '';
  let recipients = [];
  let aiIdx = 0;

  renderContacts(CONTACTS);

  function initials(n){ return n.split(' ').map(w=>w[0]).join('').slice(0,2).toUpperCase(); }

  function renderContacts(list){
    const el = document.getElementById('contactsList');
    el.innerHTML = '';
    list.forEach(c => {
      const added = recipients.some(r=>r.email===c.email);
      const row = document.createElement('div');
      row.className = 'crow' + (added?' added':'');
      row.innerHTML = `
        <div class="cav" style="background:${c.color}">${initials(c.name)}</div>
        <div class="cinfo">
          <div class="cname">${c.name}</div>
          <div class="cemail">${c.email}</div>
        </div>
        <div class="ctag ${added?'ctag-added':'ctag-add'}">${added?'âœ“ ì¶”ê°€ë¨':'+ ì¶”ê°€'}</div>
      `;
      row.onclick = () => toggleR(c, row);
      el.appendChild(row);
    });
  }

  function filterContacts(q){
    const f = q.toLowerCase();
    renderContacts(CONTACTS.filter(c=>c.name.toLowerCase().includes(f)||c.email.toLowerCase().includes(f)));
  }

  function toggleR(c, row){
    const idx = recipients.findIndex(r=>r.email===c.email);
    if(idx===-1){
      recipients.push(c);
      row.classList.add('added');
      row.querySelector('.ctag').className='ctag ctag-added';
      row.querySelector('.ctag').textContent='âœ“ ì¶”ê°€ë¨';
    } else {
      recipients.splice(idx,1);
      row.classList.remove('added');
      row.querySelector('.ctag').className='ctag ctag-add';
      row.querySelector('.ctag').textContent='+ ì¶”ê°€';
    }
    renderChips();
  }

  function renderChips(){
    const area = document.getElementById('chipsArea');
    area.innerHTML='';
    document.getElementById('rcptCount').textContent = recipients.length+'ëª…';
    if(!recipients.length){
      area.innerHTML='<span class="no-r">ì•„ì§ ì—†ì–´ìš”</span>';
      document.getElementById('sendSummary').style.display='none';
      return;
    }
    recipients.forEach(r=>{
      const chip=document.createElement('div');
      chip.className='chip';
      chip.innerHTML=`<div class="chip-av" style="background:${r.color}">${initials(r.name)}</div><span>${r.name.split(' ')[0]}</span><span class="chip-rm" onclick="removeR('${r.email}')">âœ•</span>`;
      area.appendChild(chip);
    });
    const hasDraft = document.getElementById('bodyField').value;
    document.getElementById('sendSummary').style.display='flex';
    document.getElementById('ssTitle').textContent = `${recipients.length}ëª…ì—ê²Œ ë°œì†¡ ì¤€ë¹„`;
    document.getElementById('ssSub').textContent = hasDraft ? 'ì´ˆì•ˆê³¼ ìˆ˜ì‹ ì ì„¤ì • ì™„ë£Œ' : 'ì´ˆì•ˆì„ ì‘ì„±í•´ ì£¼ì„¸ìš”';
    setStatus(`ìˆ˜ì‹ ì ${recipients.length}ëª… ì„ íƒë¨`);
  }

  function removeR(email){
    recipients=recipients.filter(r=>r.email!==email);
    renderChips(); renderContacts(CONTACTS);
  }

  function addManual(){
    const v=document.getElementById('rSearch').value.trim();
    if(!v){showToast('ì´ë¦„ ë˜ëŠ” ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”');return;}
    const c={name:v.includes('@')?v.split('@')[0]:v, email:v.includes('@')?v:v+'@email.com', color:'#555560'};
    if(!recipients.some(r=>r.email===c.email)){recipients.push(c);renderChips();}
    document.getElementById('rSearch').value='';
  }

  // â”€â”€ CHAT â”€â”€
  function sendMessage(){
    const input=document.getElementById('chatInput');
    const text=input.value.trim();
    if(!text)return;
    addBubble(text,'bu');
    input.value=''; input.style.height='auto';
    const t=document.createElement('div');
    t.className='thinking';
    t.innerHTML='<div class="tdot"></div><div class="tdot"></div><div class="tdot"></div>';
    document.getElementById('chatArea').appendChild(t); scrollChat();
    setTimeout(()=>{
      t.remove();
      const r=AI_RESP[aiIdx%AI_RESP.length]; aiIdx++;
      addAIBubble(r.text, r.cards);
      setStatus('ê²°ê³¼ë¥¼ í´ë¦­í•´ ì´ë©”ì¼ ì´ˆì•ˆì— ì¶”ê°€í•˜ì„¸ìš”');
    },1100);
  }

  function addBubble(text,cls){
    const d=document.createElement('div');
    d.className='bubble '+cls; d.textContent=text;
    document.getElementById('chatArea').appendChild(d); scrollChat();
  }

  function addAIBubble(text,cards){
    const d=document.createElement('div');
    d.className='bubble ba';
    d.innerHTML=`<span class="ai-tag">MAILO AI</span>${text}`;
    if(cards){
      const cc=document.createElement('div'); cc.className='rcards';
      cards.forEach(card=>{
        const c=document.createElement('div'); c.className='rcard';
        c.innerHTML=`<div class="rcard-ico">${card.icon}</div><div class="rcard-body"><div class="rcard-t">${card.title}</div><div class="rcard-s">${card.sub}</div></div><div class="rcard-chk">âœ“</div>`;
        c.onclick=()=>selectCard(c,card); cc.appendChild(c);
      });
      d.appendChild(cc);
    }
    document.getElementById('chatArea').appendChild(d); scrollChat();
  }

  function scrollChat(){ const a=document.getElementById('chatArea'); setTimeout(()=>a.scrollTop=a.scrollHeight,40); }
  function handleKey(e){ if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();} }
  function autoResize(el){ el.style.height='auto'; el.style.height=Math.min(el.scrollHeight,100)+'px'; }

  function selectCard(el,card){
    el.classList.toggle('sel');
    if(el.classList.contains('sel')){
      resCtx=`${card.title}: ${card.sub}`;
      document.getElementById('ctxText').textContent=card.title;
      document.getElementById('ctxBadge').style.display='inline-flex';
      setStatus(`"${card.title}" ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€ë¨`);
    } else {
      resCtx='';
      document.getElementById('ctxBadge').style.display='none';
    }
  }

  function removeCtx(){
    resCtx='';
    document.getElementById('ctxBadge').style.display='none';
    document.querySelectorAll('.rcard.sel').forEach(c=>c.classList.remove('sel'));
  }

  // â”€â”€ EMAIL â”€â”€
  function generateEmail(){
    const draft=DRAFTS[Math.floor(Math.random()*DRAFTS.length)];
    document.getElementById('subjectField').value='í˜‘ì—… ì œì•ˆ ë“œë¦½ë‹ˆë‹¤';
    document.getElementById('bodyField').value=draft;
    document.getElementById('draftStatus').textContent='AI ìƒì„±ë¨';
    setStatus('ì´ˆì•ˆ ìƒì„± ì™„ë£Œ Â· ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•˜ê³  ë³´ë‚´ì„¸ìš”');
    renderChips(); showToast('âœ¦ ì´ˆì•ˆì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤');
  }

  function rewriteEmail(){ if(!document.getElementById('bodyField').value)return; setTimeout(()=>{ document.getElementById('draftStatus').textContent='ì¬ì‘ì„±ë¨'; showToast('ì´ë©”ì¼ì„ ì¬ì‘ì„±í–ˆìŠµë‹ˆë‹¤'); },600); }
  function shortenEmail(){ const b=document.getElementById('bodyField').value; if(!b)return; const l=b.split('\n').filter(x=>x.trim()); document.getElementById('bodyField').value=l.slice(0,Math.ceil(l.length*.55)).join('\n'); showToast('ìš”ì•½ë˜ì—ˆìŠµë‹ˆë‹¤'); }
  function formalEmail(){ if(!document.getElementById('bodyField').value)return; showToast('ê³µì‹ì ì¸ ë¬¸ì²´ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤'); }
  function casualEmail(){ if(!document.getElementById('bodyField').value)return; showToast('ì¹œê·¼í•œ ë¬¸ì²´ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤ â˜€ï¸'); }
  function saveDraft(){ showToast('ì„ì‹œì €ì¥ ì™„ë£Œ'); setStatus('ì„ì‹œì €ì¥ë¨'); }

  function selectSender(el){
    document.querySelectorAll('.sender-opt').forEach(b=>b.classList.remove('active'));
    el.classList.add('active');
    const name = el.querySelector('.sender-name').textContent;
    setStatus(name + ' ê³„ì •ìœ¼ë¡œ ë°œì‹  ì„¤ì •ë¨');
  }

  function sendAll(){
    if(!recipients.length){showToast('ìˆ˜ì‹ ìë¥¼ ì¶”ê°€í•´ ì£¼ì„¸ìš”');return;}
    if(!document.getElementById('bodyField').value){showToast('ì´ë©”ì¼ ï¿½